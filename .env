# ============================================
# 生产环境配置文件
# ============================================
# 使用前请修改所有敏感信息（密码、密钥等）
# 复制此文件为 .env 或直接使用 --env-file .env.production
# ============================================

# ============================================
# 应用基础配置
# ============================================
APP_NAME=OCPP 1.6J CSMS
APP_VERSION=1.0.0
ENVIRONMENT=production
DEBUG=false

# ============================================
# 服务器配置
# ============================================
HOST=0.0.0.0
PORT=9000
CSMS_PORT=9000
ADMIN_PORT=3000

# ============================================
# 数据库配置 (PostgreSQL)
# ============================================
DB_USER=ocpp_user
DB_PASSWORD=CHANGE_THIS_SECURE_PASSWORD
DB_NAME=ocpp_prod
DB_HOST=db
DB_PORT=5432
DATABASE_URL=postgresql://ocpp_user:CHANGE_THIS_SECURE_PASSWORD@db:5432/ocpp_prod

# 数据库连接池配置
DB_POOL_SIZE=10
DB_MAX_OVERFLOW=20
DB_POOL_RECYCLE=3600

# ============================================
# Redis 配置
# ============================================
REDIS_URL=redis://redis:6379/0
REDIS_PASSWORD=
REDIS_DECODE_RESPONSES=true

# ============================================
# MQTT Broker 配置
# ============================================
MQTT_BROKER_HOST=mqtt-broker
MQTT_BROKER_PORT=1883
MQTT_USERNAME=
MQTT_PASSWORD=
MQTT_TOPIC_PREFIX=ocpp

# ============================================
# 传输协议配置
# ============================================
# MQTT 传输（默认启用，生产环境推荐）
ENABLE_MQTT_TRANSPORT=true

# WebSocket 传输（可选，默认关闭）
ENABLE_WEBSOCKET_TRANSPORT=false

# HTTP 传输（可选，默认关闭）
ENABLE_HTTP_TRANSPORT=false

# ============================================
# 安全配置
# ============================================
# 重要：生产环境必须修改此密钥！
SECRET_KEY=CHANGE_THIS_TO_A_RANDOM_SECRET_KEY_AT_LEAST_32_CHARACTERS
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30

# CORS 配置（生产环境应限制具体域名）
CORS_ORIGINS=["http://your-domain.com","https://your-domain.com"]
CORS_ALLOW_CREDENTIALS=true

# ============================================
# TLS/SSL 配置
# ============================================
ENABLE_TLS=false
SSL_CERTFILE=
SSL_KEYFILE=

# ============================================
# OCPP 配置
# ============================================
OCPP_HEARTBEAT_INTERVAL=30
OCPP_MESSAGE_TIMEOUT=5
OCPP_MAX_RETRIES=3

# ============================================
# 日志配置
# ============================================
LOG_LEVEL=INFO
LOG_FORMAT=json
LOG_FILE=/var/log/csms/app.log

# ============================================
# 监控配置
# ============================================
ENABLE_METRICS=true
METRICS_PATH=/metrics

# ============================================
# API 配置
# ============================================
API_V1_PREFIX=/api/v1
DOCS_URL=/docs
REDOC_URL=/redoc

# ============================================
# 速率限制
# ============================================
RATE_LIMIT_ENABLED=true
RATE_LIMIT_PER_MINUTE=60

# ============================================
# 充电桩默认配置
# ============================================
DEFAULT_CHARGING_RATE=7.0
DEFAULT_PRICE_PER_KWH=2700.0

# ============================================
# Admin 前端配置
# ============================================
# 重要：修改为实际的生产服务器地址
NEXT_PUBLIC_CSMS_HTTP=http://your-server-ip:9000
NODE_ENV=production

# ============================================
# 分布式部署配置（可选）
# ============================================
ENABLE_DISTRIBUTED=false
SERVER_ID=

# ============================================
# WebSocket 配置（如果启用）
# ============================================
WS_PING_INTERVAL=20
WS_PING_TIMEOUT=10
WS_MAX_CONNECTIONS=1000
